<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title></title>
<script src="jquery.min.js" type="text/javascript" charset="utf-8">
    
</script>
<link rel="stylesheet" href="style.css" title="" type="" />
</head>
<body>
<h1>Mt‚àÖDGA</h1>
<!-- Liste de quelques villes -->
<div class="listVilles">
<p id="villes"> <span id="fleche">></span> Villes</p>

<!--Listes Des Viles -->
<div class="villes">
    
<!-- Les villes en A -->
<p class="v">Achgabat</p>
<p class="v">Astana</p>
<p class="v">Alaska</p>
<p class="v">Ankara</p>
<p class="v">Abu Dhabi</p>
<p class="v">Alabama</p>
<p class="v">Accra</p>
<p class="v">Abidjan</p>
<p class="v">Antananarive</p>
<p class="v">Adis Ababa</p>
<p class="v">Alger</p>
<p class="v">Ashgaba</p>
<p class="v">Abudja</p>
<p class="v">Ath√®nes</p>
<p class="v">Amsterdam</p>
<p class="v">Amman</p>

<!-- Les villes en B -->
<p class="v">Brazzaville</p>
<p class="v">Brasilia</p>
<p class="v">Bratislava</p>
<p class="v">Bangkok</p>
<p class="v">Bichkek</p>
<p class="v">Bamako</p>
<p class="v">Berlin</p>
<p class="v">Bologne</p>
<p class="v">Bagdad</p>
<p class="v">Bordaux</p>
<p class="v">Bangui</p>
<p class="v">Bujumbura</p>
<p class="v">Banjul</p>
<p class="v">Berne</p>
<p class="v">Belmopan</p>
<p class="v">Barcelone</p>
<p class="v">Budapest</p>
<p class="v">Bucarest</p>
<p class="v">Beijing</p>
<p class="v">Buenos Aires</p>
<p class="v">Beyrouth</p>

<!-- Les villes en C -->
<p class="v">Caire</p>
<p class="v">Cotonou</p>
<p class="v">Cabinda</p>
<p class="v">Caracas</p>
<p class="v">Colombo</p>
<p class="v">Canberra</p>
<p class="v">Conakry</p>
<p class="v">Copenhague</p>

<!-- Les villes en D -->
<p class="v">Dolisie</p>
<p class="v">Douala</p>
<p class="v">Djuba</p>
<p class="v">Djamena</p>
<p class="v">Damas</p>
<p class="v">Duba√Ø</p>
<p class="v">Dacca</p>
<p class="v">Doushanb√©</p>
<p class="v">Dodoma</p>

<!-- Les villes en E -->
<p class="v">√ârythr√©e</p>

<!-- Les villes en F -->
<p class="v">Freetown</p>
<p class="v">France Ville</p>
<p class="v">Funafuti</p>
<p class="v"></p>

<!-- Les villes en G -->
<p class="v">Georgetown</p>
<p class="v">Gibraltar</p>

<!-- Les villes en H -->
<p class="v">Harare</p>
<p class="v">Hano√Ø</p>
<p class="v">Helsinki</p>

<!-- Les villes en I -->
<p class="v">Islamabad</p>

<!-- Les villes en J -->
<p class="v">J√©rusalem</p>

<!-- Les villes en K -->
<p class="v">Kinkala</p>
<p class="v">Kinshasa</p>
<p class="v">Kigali</p>
<p class="v">Kuala Lupur</p>
<p class="v">Kampala</p>
<p class="v">Khartoum</p>
<p class="v">Kyiv</p>
<p class="v">Kowe√Øt</p>
<p class="v">Kaboul</p>

<!-- Les villes en L -->
<p class="v">Libreville</p>
<p class="v">Luanda</p>
<p class="v">Lagos</p>
<p class="v">Londre</p>
<p class="v">La Paz</p>
<p class="v">Lilongwe</p>
<p class="v">Lima</p>

<!-- Les villes en M -->
<p class="v">Madingou</p>
<p class="v">Maseru</p>
<p class="v">Maputo</p>
<p class="v">Monrovia</p>
<p class="v">Mogadisho</p>
<p class="v">Manama</p>
<p class="v">Madrid</p>
<p class="v">Manille</p>
<p class="v">Munich</p>
<p class="v">Minsk</p>
<p class="v">Mexico</p>
<p class="v">Moroni</p>
<p class="v">Mal√©</p>
<p class="v">New Delhi</p>
<p class="v">New York</p>

<!-- Les villes en N -->
<p class="v">Nkayi</p>
<p class="v">Nouakchott</p>
<p class="v">Niamey</p>
<p class="v">Nairobi</p>
<p class="v">N'Djamena</p>
<p class="v">Nicosie</p>

<!-- Les villes en O -->
<p class="v">Oyo</p>
<p class="v">Ouesso</p>
<p class="v">Ougadougou</p>
<p class="v">Oulan-Bator</p>
<p class="v">Oslo</p>

<!-- Les villes en P -->
<p class="v">Paris</p>
<p class="v">Pointe-Noire</p>
<p class="v">Porto Novo</p>
<p class="v">Pretoria</p>
<p class="v">Paramaribo</p>
<p class="v">Port-au-Prince</p>
<p class="v">Prague</p>
<p class="v">Panama</p>

<!-- Les villes en Q -->
<p class="v">Quito</p>

<!-- Les villes en R -->
<p class="v">Rabat</p>
<p class="v">Riga</p>

<!-- Les villes en S -->
<p class="v">Sibiti</p>
<p class="v">San Salvador</p>
<p class="v">S√©oul</p>
<p class="v">Suva</p>
<p class="v">Stockholm</p>
<!-- Les villes en T -->
<p class="v">Tachkent</p>
<p class="v">Tallinn</p>
<p class="v">Tbilissi</p>
<p class="v">Toronto</p>
<p class="v">Tegucigalpa</p>
<p class="v">T√©h√©ran</p>
<p class="v">Tokyo</p>

<!-- Les villes en U -->

<!-- Les villes en V -->
<p class="v">Valence</p>
<p class="v">Vienne</p>
<p class="v">Vilnius</p>

<!-- Les villes en W -->
<p class="v">Wellington</p>
<p class="v">Washington</p>

<!-- Les villes en X -->


<!-- Les villes en Y -->
<p class="v">Yaound√©</p>
<p class="v">Yamoussoukro</p>

<!-- Les villes en Z -->
<p class="v">Zagreb</p>
<p class="v">Zurich</p>

<!-- Les villes en Autres Lettres -->

</div>
</div>
<input type="text" id="city" placeholder="Enter City" /><br />
<button class="btnShow" onclick="getWeather()">Show</button>

<!--Tableau d'affichage -->
<div class="meteo">
<h3 id="titre"></h3>
<div class="vent-coord">
<div class="vent-div">
    <h5>Vitesse Du Vent <br> En Km/h</h5>
    <p id="vent"></p>
</div>
<div class="coord">
    <h5>GeoDatas</h5>

<p>Latitude: <br><span id="lat"></span></p>
 <p>Longitude:<br> <span id="lng"></span></p>   
  
</div>   
</div>

<div class="temp-div">
    <h5>Temp√©rature <br> En ¬∞C </h5>
<p id="temp"></p>
</div>

</div>
<div class="erreur">
    
</div>
<button id="ToggleMode">‚òÄÔ∏è</button>
<script type="text/javascript" charset="utf-8">
const Toggle = document.getElementById('ToggleMode');
Toggle.addEventListener('click', () => {
  document.body.classList.toggle('claire');
  // Changer l'ic√¥ne du bouton
  Toggle.innerHTML = document.body.classList.contains('claire') ?  'üåô' : `‚òÄÔ∏è`;
});
</script>
<script type="text/javascript" charset="utf-8">
    let city;
// Fonctions UI/UX
//Affichage de la liste des villes
$(document).ready(function(){
    $("#villes").on('click', ()=>{
        $('.villes').slideToggle();
    })
    

});
    //Fonction pour ajouter le nom de la ville en cliquant sur ce dernier
let nomVilles = document.querySelectorAll('.v')
nomVilles.forEach(ville =>{
    ville.addEventListener('click',()=>{
    document.getElementById("city").value = ville.innerText;
    document.querySelector('.villes').style = `display:none`
});
});


async function getWeather(city) {
try {
// √âtape 1 : R√©cup√©rer la latitude et la longitude avec l‚ÄôAPI de g√©ocodage
city = document.getElementById('city').value;
let geoResponse = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${city}`);
let geoData = await geoResponse.json();

if (!geoData.results || geoData.results.length === 0) {
console.log("Ville introuvable ‚ùå");
let Err = document.querySelector(".erreur");
Err.style = 'display:inline'
Err.innerText = `Ville introuvable ‚ùå`
setTimeout(()=>{
    Err.innerText = "";
    Err.style = 'display:none'
    
},1500);
return;
}

let latitude = geoData.results[0].latitude;
let longitude = geoData.results[0].longitude;
lat.textContent = latitude;
lng.textContent = longitude;
// √âtape 2 : R√©cup√©rer la m√©t√©o avec latitude et longitude
let weatherResponse = await fetch(
`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true`
);
let weatherData = await weatherResponse.json();

console.log(`üåç M√©t√©o √† ${city} :`);
document.getElementById('titre').textContent = `üåç ${city} `;
console.log("Temp√©rature :", weatherData.current_weather.temperature, "¬∞C");
document.getElementById('temp').textContent = `${weatherData.current_weather.temperature}¬∞C`;
console.log("Vent :", weatherData.current_weather.windspeed, "km/h");
document.getElementById('vent').textContent = `${weatherData.current_weather.windspeed} km/h`;

} catch (error) {
console.error("Erreur :", error);
}
}
// Exemple : demande la m√©t√©o pour Pointe-Noire
</script>

</body>
</html>
